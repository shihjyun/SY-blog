---
title: 哈囉！你是網軍嗎？PTT推文關係視覺化
author: Steven Yeo
date: '2019-12-09'
slug: 哈囉-你是網軍嗎-ptt推文關係視覺化
categories:
  - R
  - Social Network Analysis
  - Data Visualization
tags:
  - PTT
  - SNA
  - R
  
summary: 大選將近，新聞爆出有公司透過操縱大量 PTT 社群平台帳號來操縱網路輿論風向，那除了身為資訊接收者的我們要保有獨立思考判斷資訊真偽的能力外，還有其他方法可以找出社群網路中的怪異行為嗎？
---

大選將近，新聞爆出有公司透過操縱大量 PTT 社群平台帳號來操縱網路輿論風向，那除了身為資訊接收者的我們要保有獨立思考判斷資訊真偽的能力外，還有其他方法可以找出社群網路中的怪異行為嗎？有的！本篇文章以資料記者林佳賢於《天下雜誌》刊登的 [跟著資料記者追網軍，「假外國人」如何在PTT鼓吹韓流](https://www.cw.com.tw/article/articleLogin.action?id=5094848) 中第二種網軍作戰方式「大量推文，引導輿論風向。」做為延伸來進行分析。

### 那要怎麼做？
#### 文章資料選取

由於八卦板從 12/1 開始提高推發文門檻限制，筆者好奇從 12/1 - 12/8 一個星期多的時間八卦版的推文生態有沒有變化，所以時間區間範圍選在 12/1 - 12/8。接著要思考的是什麼樣的文章對網軍來說是比較好帶風向的呢？當然是淨推文數高的文章！包含筆者自己，都習慣從淨推文數高的文章開始關注，所以這次會從以下條件的文章來判斷是否有固定推文集團的存在。

- 淨推文數大於 50
- 12/1 - 12/8 期間內發表

如果想參考此篇的分析方法，以上範圍都可以依各種分析目的去做改變。

#### 找出推文集團的方法

如同天下雜誌的文章中所提到的，網軍可能以操縱多隻帳號進行特定色彩的推文來引導輿論方向，所以目標是要找出 **推文中的帳號是否有共同出現的關係存在**，衡量這種關係的方法就是簡單的 Phi Correlation，這種分析方式通常是用在文字探勘中挖掘文集中的共現詞，藉此找出高相關的詞彙，所以相同的概念把 **文章中詞彙的** 替換成該篇 **文章中推文出現的帳號** ，就可以以此衡量兩兩帳號間共現的關係強弱。以下用簡單的數學式來表示推文帳號間的共現關係如何計算：

所有文章中各種情況的次數：

|  | 有出現帳號B | 無出現帳號B | Total |
|------------|---------------|---------------|--------------|
| 有出現帳號A | $n_{11}$ | $n_{10}$ | $n_{1\cdot}$|
| 無出現帳號A | $n_{01}$ | $n_{00}$ | $n_{0\cdot}$ |
| Total | $n_{\cdot 1}$ | $n_{\cdot 0}$ | $n$ |


$$\phi=\frac{n_{11}n_{00}-n_{10}n_{01}}{\sqrt{n_{1\cdot}n_{0\cdot}n_{\cdot0}n_{\cdot1}}}$$

這邊舉個簡單的例子來讓大家更好理解！假設 A,B,C 三人在周末總共可以選擇參加三場聚會：

- 第一場聚會：A,B 參加
- 第二場聚會：A,B,C 都參加
- 第三場聚會：都沒人參加

我們想藉由以上資訊來推敲出 A,C 以及 A,B 之間共同出席的關係強弱，所以我們可以知道：

$n_{11} = 1, n_{01} = 0, n_{10} = 1, n_{00} = 1, n_{\cdot 1} = 1$ 最後 $\phi_{AC} = 0.5$
$n_{11} = 2, n_{01} = 0, n_{10} = 0, n_{00} = 2, n_{\cdot 1} = 1$ 最後 $\phi_{AB} = 1$

由這個簡單的例子可以知道 A,B 共同出現的關係比 A,C 共同出現的關係強，而其中有沒有參加聚會的這個行為其實就跟帳號有沒有貼文推文是一樣的！

### 所以說...那個數據呢？

#### 鄉民間的關係

因為文章篇幅關係，所以下面只會帶大家探索一些數字以及資料視覺化的結果，相關的 R code 我會放在 [Github](https://github.com/shihjyun/PTT_cyber_analysis) 上，有興趣的人可以參考。

在 12/1 - 12/8 中，PTT 八卦板淨推文數 50 以上的文章共有 **800** 篇，其中產生約 **25.5** 萬則推文，約 **26000** 名鄉民有參與在其中！再經過推文帳號共現關係的計算後，每個帳號間我們可以得到以下結果：

```
#> A tibble: 19,585,050 x 3
#>   item1        item2        correlation
#>   <chr>        <chr>              <dbl>
#> 1 LITTLEDENNY  rscs               0.967
#> 2 rscs         LITTLEDENNY        0.967
#> 3 jims123      rscs               0.962
#> 4 rscs         jims123            0.962
#> 5 gossipboy060 rscs               0.962
#> 6 rscs         gossipboy060       0.962
#> 7 gossipboy060 LITTLEDENNY        0.959
#> 8 LITTLEDENNY  gossipboy060       0.959
#> 9 jims123      LITTLEDENNY        0.954
#>10 LITTLEDENNY  jims123            0.954
#> … with 19,585,040 more rows
```

每兩位鄉民就可以計算可能在同篇文章中的共現關係，約 **26000** 位鄉民共有約 **1900萬** 條關係，扣除掉方向性的話還是將近有有 **1000萬** 條！而且這還是有經過一些 **篩選後** [^1]的結果！那問題來了，我們要如何從這龐大的關係中找出有意義的資訊呢？

#### 鄉民間奇妙的關係

我們可以先簡單對這些關係進行簡單的探索，看看 **一般的** 鄉民正常的關係大概是多少！

```
#>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
#> -0.361053 -0.020972 -0.003722  0.016514  0.046168  0.967019 
```

什麼？關係竟然有負數的！其實仔細從公式中想想這是有可能的！而且不少人都是如此！解釋上 **他們絕大部分時候不會在同一篇文章中同時出現**，也應該可以算是不在場證明吧？XD，接著我們簡單對以上數據進行視覺化：

<center>

![](/post/2019-12-09/Rplot01.png)
</center>

由此可知，我們的目標是要找出共同推文關係越強的那群人是誰！由於總體關係數量龐大，這邊先篩選出 correlation 大於 0.8 的關係並進行視覺化！

```{r, results='asis', echo=FALSE, }
cat(htmltools::includeHTML("../../static/post/2019-12-09/cyber_network.html"))
```

從這個由共同推文關係所建立的網路圖中可以發現：

- 這是由 18 位鄉民所組成的集團網路
- 共同推文集團網路在 12/1 - 12/8 熱門文章中只有一個

##### 這其中有什麼故事？

上面所繪製的網路圖僅能代表這群鄉民時常在熱門文章中共同推文， **而且共同次數異於常人！** ，但他們是網軍嗎？這也許要更深入的分析才會知道 (交叉比對 ip、推文內容)，所以筆者有一個一個去觀察發現這些鄉民的推文其實都有 **特定色彩存在** ，有不少線索可循，真的很有趣XD，這邊留給大家去做探索，為了方便大家探索此次結果，大家只要雙擊上方網路圖的節點就可以直連結到其他鄉民開發的稽查工具 [plytic.com](https://www.plytic.com/) ，來觀察節點中的鄉民推文內容！

### 結束了嗎？還沒有！

這次的分析方法是剛好吃飯的時候突然想到「或許可以這麼做」XD，所以可能在我沒發現的地方會有些瑕疵，都歡迎大家討論指教！如果要做深一點大概可以用一些主題模型來分析那些鄉民的推文內容的特徵，或許更能看到集團網路中一些有趣的地方！如果要做更廣一點也可以針對不同的關鍵字、時間點、作者去做文集的篩選 (這邊筆者原本期待會有數個不同的集團網路出現，但只有一個 ... 或許透過這些調整可以看到其他不同的結果)，爬文的部分就自推一下筆者自製的 R 套件 [PTTmineR](https://github.com/shihjyun/PTTmineR) XDD，它可以讓你很輕鬆地把想要的 PTT 文章資訊爬下來。

以上，謝謝大家有耐心地看到這邊！希望本篇內容對你會有幫助！

[^1]: 為避免同位鄉民不重複文章推文過少造成計算偏誤，所以有篩選每位鄉民在 800 篇文章中至少要不重複出現 10 次

